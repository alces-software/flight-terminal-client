<%#
  Copyright (C) 2017 Stephen F. Norledge and Alces Software Ltd.

  This file is part of Alces Launch.

  All rights reserved, see LICENSE.txt.
%>
<% setup %>

<p>Your Alces Flight Compute HPC cluster is ready for use!</p>

<p>
Your <%= @cluster_spec_name %> <code><%= @cluster_name %></code> has reached
cruising altitude and is available for use.
</p>

<% if @using_token %>
    <p>
    Remember, the flight time for this cluster is <%= @runtime %>. Please
    remember to save your work.
    </p>
<% else %>
    <p>
    Remember, this cluster will remain in flight until you shut it down.  If
    you want to learn more on how to shut down a cluster, click here.
    </p>
<% end %>

<p>
You can find details about your cluster including how to access it
below.
</p>

<blockquote>
    <table cellpadding="0" cellspacing="0" border="0">
        <thead>
            <tr>
                <td width="<%= td_width(1) %>">
                    <h4 class="cluster-details-title">Cluster details</h4>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td width="<%= td_width(1) %>">
                    <dl>
                        <% cluster_details.each do |cd| %>
                            <dt><%= cd.title %></dt>
                            <dd><%= cd.value %></dd>
                        <% end %>
                    </dl>
                </td>
            </tr>
        </tbody>
    </table>
</blockquote>

<blockquote>
    <table cellpadding="0" cellspacing="0" border="0">
        <thead>
            <tr>
                <td width="<%= td_width(1) %>">
                    <h4 class="cluster-access-title">Accessing your cluster</h4>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td width="<%= td_width(1) %>">
                    <p>
                    You can access your cluster using the URL provided above or
                    via SSH.  When prompted for a password enter
                    <code><%= password %></code>.
                    </p>
                    <p style="text-align: center">
                    <code><%= @access_details %></code>
                    </p>
                </td>
            </tr>
        </tbody>
    </table>
</blockquote>

<% if ! @using_token %>
<blockquote>
    <table cellpadding="0" cellspacing="0" border="0">
        <thead>
            <tr>
                <td width="<%= td_width(1) %>">
                    <h4 class="cluster-resources-title">Cluster resources</h4>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td width="<%= td_width(1) %>">
                    <p>The following resources have been created:</p>

                    <ul class="cluster-resource-list">
                        <% @resources.split("\n").each do |resource| %>
                            <li><%= resource %></li>
                        <% end %>
                    </ul>
                </td>
            </tr>
        </tbody>
    </table>
</blockquote>
<% end %>

<% note do %>
    <p class="notes">
    You are receiving this email because you have started an Alces
    Flight Compute HPC cluster with the Alces Flight Launch
    service. Your cluster is now ready for use.
    </p>
<% end %>

<%= render 'shared/contact_us' %>
<p>Thank you for choosing the Alces Flight Launch service.</p>
